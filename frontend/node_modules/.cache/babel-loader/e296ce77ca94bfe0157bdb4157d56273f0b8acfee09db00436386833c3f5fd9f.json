{"ast":null,"code":"import _objectSpread from\"/home/thuanlee/Programs/Python/myNote/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/thuanlee/Programs/Python/myNote/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/thuanlee/Programs/Python/myNote/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/thuanlee/Programs/Python/myNote/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState,useEffect}from'react';import{Link,useParams,useNavigate}from'react-router-dom';import Button from'@mui/material/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var NotePage=function NotePage(){var params=useParams();var noteId=params.id;var navigate=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(noteId==='new')){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return fetch(\"/api/notes/\".concat(noteId));case 4:response=_context.sent;_context.next=7;return response.json();case 7:data=_context.sent;setNote(data);case 9:case\"end\":return _context.stop();}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();useEffect(function(){getNote();},[noteId]);var saveHandle=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(noteId==='new'){if(note!=null&&note.body!==\"\"){fetch(\"/api/notes/create\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});}}else if(note.body===\"\"){fetch(\"/api/notes/\".concat(noteId,\"/delete\"),{method:'DELETE',headers:{'Content-Type':'application/json'}});}else{fetch(\"/api/notes/\".concat(noteId,\"/update\"),{method:\"PUT\",headers:{'Content-Type':'application/json'},body:JSON.stringify(note)});}navigate('/notes');case 2:case\"end\":return _context2.stop();}},_callee2);}));return function saveHandle(){return _ref2.apply(this,arguments);};}();var deleteHandle=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:fetch(\"/api/notes/\".concat(noteId,\"/delete\"),{method:'DELETE',headers:{'Content-Type':'application/json'}});navigate('/');case 2:case\"end\":return _context3.stop();}},_callee3);}));return function deleteHandle(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsx(\"textarea\",{value:note===null||note===void 0?void 0:note.body,spellCheck:\"false\",onChange:function onChange(e){return setNote(_objectSpread(_objectSpread({},note),{},{'body':e.target.value}));}}),/*#__PURE__*/_jsxs(\"div\",{className:\"note-btn\",children:[/*#__PURE__*/_jsx(Button,{onClick:saveHandle,children:\"Save\"}),/*#__PURE__*/_jsx(Button,{children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Cancel\"})}),noteId!=='new'&&/*#__PURE__*/_jsx(\"div\",{className:\"delete-btn\",children:/*#__PURE__*/_jsx(Button,{onClick:deleteHandle,color:\"error\",children:\"Delete\"})})]})]});};export default NotePage;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","Button","jsx","_jsx","jsxs","_jsxs","NotePage","params","noteId","id","navigate","_useState","_useState2","_slicedToArray","note","setNote","getNote","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","abrupt","fetch","concat","sent","json","stop","apply","arguments","saveHandle","_ref2","_callee2","_callee2$","_context2","body","method","headers","JSON","stringify","deleteHandle","_ref3","_callee3","_callee3$","_context3","className","children","value","spellCheck","onChange","e","_objectSpread","target","onClick","to","color"],"sources":["/home/thuanlee/Programs/Python/myNote/frontend/src/page/NotePage.js"],"sourcesContent":["import React from 'react'\nimport { useState, useEffect } from 'react'\nimport { Link, useParams, useNavigate } from 'react-router-dom'\nimport Button from '@mui/material/Button'\n\nexport const NotePage = () => {\n  \n  const params = useParams()\n  const noteId = params.id\n  const navigate = useNavigate()\n\n  let [note, setNote] = useState(null)\n\n  const getNote = async () => {\n    if (noteId === 'new')  return\n    let response = await fetch(`/api/notes/${noteId}`)\n    let data = await response.json()\n    setNote(data)\n  }\n\n  useEffect(() => {\n    getNote()\n  }, [noteId])\n\n  const saveHandle = async () => {\n    if (noteId === 'new') {\n      if (note != null && note.body !== \"\") {\n        fetch(`/api/notes/create`, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify(note)\n        })\n      }\n    } else if (note.body === \"\") {\n      fetch(`/api/notes/${noteId}/delete`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      })\n    } else {\n      fetch(`/api/notes/${noteId}/update`, {\n        method: \"PUT\",\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(note)\n      })\n    }\n    navigate('/notes')\n  }\n\n  const deleteHandle = async () => {\n    fetch(`/api/notes/${noteId}/delete`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    })\n    navigate('/')\n  }\n\n  return (\n    <div className='note'>\n      <textarea value={note?.body} spellCheck=\"false\" onChange={e => setNote({...note, 'body': e.target.value})}></textarea>\n      <div className='note-btn'>\n        <Button onClick={saveHandle}>Save</Button>\n        <Button><Link to='/'>Cancel</Link></Button>\n        {noteId !== 'new' &&\n          <div className='delete-btn'>\n            <Button onClick={deleteHandle} color='error'>Delete</Button>\n          </div>\n        }\n      </div>\n    </div>\n  )\n}\n\nexport default NotePage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}